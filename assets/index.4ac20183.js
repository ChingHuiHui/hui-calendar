var R=(o,t,e)=>{if(!t.has(o))throw TypeError("Cannot "+e)};var l=(o,t,e)=>{if(t.has(o))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(o):t.set(o,e)};var n=(o,t,e)=>(R(o,t,"access private method"),e);const q=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function e(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(r){if(r.ep)return;r.ep=!0;const i=e(r);fetch(r.href,i)}};q();const p=document.querySelector(".panel"),H=document.querySelector(".panel-list"),I=document.querySelector("#panel-close"),f=document.querySelector(".days"),$=document.querySelector(".title"),b=document.querySelector(".day-body"),O=document.querySelector(".control-buttons"),F=document.querySelector("#prev"),B=document.querySelector("#next"),G=document.querySelector("#mode-button");function v(o,t){return new Date(o,t+1,0).getDate()}function P(o){return new Date(o).getDate().toString()}function k(o){return typeof o=="number"&&(o=`${o}`),o.padStart(2,"0")}function E(o){const t=new Date(o),e=t.getFullYear(),a=k(t.getMonth()+1),r=k(t.getDate());return`${e}-${a}-${r}`}var g=(o=>(o[o.EMERGENCY=0]="EMERGENCY",o[o.NORMAL=1]="NORMAL",o))(g||{}),d=(o=>(o[o.MONTH=0]="MONTH",o[o.DAY=1]="DAY",o))(d||{});class K{constructor(t){this.items=t}getTasks(t){return t?this.items.filter(({date:e})=>e===t):[]}haveTask(t){return this.getTasks(t).length>0}haveEmergency(t){return this.getTasks(t).filter(({status:e})=>e===g.EMERGENCY).length>0}}var y,N,x,S,D,C,L,j,h,u,w,m,M,T,z,Y;class X{constructor(t,e=new Date().getFullYear(),a=new Date().getMonth(),r=new Date().getDate(),i=d.MONTH){l(this,y);l(this,x);l(this,D);l(this,L);l(this,h);l(this,w);l(this,M);l(this,z);this.tasks=t,this.year=e,this.month=a,this.date=r,this.mode=i}get firstDayInCurrentMonth(){return new Date(this.year,this.month,1).getDay()}get isDayMode(){return this.mode===d.DAY}get activeDate(){return E(new Date(this.year,this.month,this.date).toISOString())}toggleMode(){this.mode=this.mode===d.DAY?d.MONTH:d.DAY}changeDate(t){const[e,a,r]=E(t).split("-").map(i=>+i);this.year=e,this.month=a-1,this.date=r}prev(){this.isDayMode?n(this,w,m).call(this,this.date-1):(n(this,h,u).call(this,this.month-1),n(this,w,m).call(this,1)),this.render()}next(){this.isDayMode?n(this,w,m).call(this,this.date+1):(n(this,h,u).call(this,this.month+1),n(this,w,m).call(this,1)),this.render()}render(){n(this,M,T).call(this),this.mode===d.MONTH&&n(this,L,j).call(this),this.mode===d.DAY&&n(this,z,Y).call(this)}}y=new WeakSet,N=function(){const t=this.firstDayInCurrentMonth,e=this.month-1,a=v(this.year,e);let r=[];for(let i=t;i>0;i--){const s=new Date(this.year,e,a-i).toISOString();r=[...r,{date:s}]}return r},x=new WeakSet,S=function(){let t=[];const e=v(this.year,this.month);for(let a=0;a<e;a++){const r=new Date(this.year,this.month,a+1).toISOString();t=[...t,{date:r}]}return t},D=new WeakSet,C=function(){const t=[...n(this,y,N).call(this),...n(this,x,S).call(this)],e=this.month+1,a=t.length%7,r=a===0?0:7-a;let i=[];for(let s=0;s<r;s++){const A=new Date(this.year,e,s+1).toISOString();i=[...i,{date:A}]}return i},L=new WeakSet,j=function(){f.innerHTML="",[...n(this,y,N).call(this),...n(this,x,S).call(this),...n(this,D,C).call(this)].forEach(e=>{const a=document.createElement("time"),{date:r}=e,i=E(r);if(a.className="cell date-cell",a.innerText=r?P(r):"",a.dataset.date=r,new Date(r).getMonth()!==this.month&&a.classList.add("prev-month"),this.tasks.haveTask(i)){a.classList.add("have-task");const s=document.createElement("div");s.classList.add("tag"),s.classList.add(this.tasks.haveEmergency(i)?"emergency":"normal"),a.appendChild(s)}f.appendChild(a)})},h=new WeakSet,u=function(t){let e=t;e>11&&(this.year++,e=0),e<0&&(this.year--,e=11),this.month=e},w=new WeakSet,m=function(t){let e=t;const a=v(this.year,this.month);e>=a&&(n(this,h,u).call(this,this.month+1),e=1),e<=0&&(n(this,h,u).call(this,this.month-1),e=v(this.year,this.month)),this.date=e},M=new WeakSet,T=function(){const t=[this.year,k(this.month+1)];this.isDayMode&&t.push(k(this.date)),$.innerText=t.join(".")},z=new WeakSet,Y=function(){b.innerHTML="";const t=this.tasks.getTasks(this.activeDate).map(a=>a.todo.map(r=>`<li> ${r}</li>`).join(""));if(t.length===0){b.innerText="NO TASK";return}const e=`<ul>${t}</ul>`;b.innerHTML=e};const c=new X(new K([{date:"2022-06-12",todo:["Have Meeting","Develop a project"],status:g.NORMAL},{date:"2022-06-13",todo:["Write Document","Finish the project"],status:g.EMERGENCY},{date:"2022-06-25",todo:["learn TypeScript"],status:g.NORMAL},{date:"2022-07-07",todo:["learn Vue3"],status:g.NORMAL}]));f.addEventListener("click",o=>{const t=o.target;if(Array.from(f.children).forEach(i=>{i.classList.remove("active")}),!t.classList.contains("date-cell")||!t.classList.contains("have-task"))return;c.changeDate(t.dataset.date||""),p.classList.remove("emergency"),p.classList.remove("normal"),p.classList.add("active"),p.classList.add(c.tasks.haveEmergency(c.activeDate)?"emergency":"normal"),p.dataset.date=c.date.toString(),t.classList.add("active"),O.classList.add("hide");const r=`<ul>${c.tasks.getTasks(c.activeDate).map(i=>i.todo.map(s=>`<li> ${s}</li>`).join(""))}</ul>`;H.innerHTML=r});f.addEventListener("mouseover",o=>{const t=o.target;if(!t.classList.contains("date-cell"))return;const{offsetLeft:e,offsetTop:a}=t;p.style.left=`${e}px`,p.style.top=`${a}px`});I.addEventListener("click",()=>{p.classList.remove("active"),O.classList.remove("hide")});F.addEventListener("click",()=>{c.prev()});B.addEventListener("click",()=>{c.next()});G.addEventListener("click",()=>{if(c.toggleMode(),c.mode===d.DAY){b.classList.add("open"),c.render();return}b.classList.remove("open"),c.render()});c.render();

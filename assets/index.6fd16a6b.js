var z=(o,t,e)=>{if(!t.has(o))throw TypeError("Cannot "+e)};var l=(o,t,e)=>{if(t.has(o))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(o):t.set(o,e)};var d=(o,t,e)=>(z(o,t,"access private method"),e);const L=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const n of i.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&a(n)}).observe(document,{childList:!0,subtree:!0});function e(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(r){if(r.ep)return;r.ep=!0;const i=e(r);fetch(r.href,i)}};L();const s=document.querySelector(".panel"),D=document.querySelector(".panel-list"),M=document.querySelector("#panel-close"),w=document.querySelector(".days"),S=document.querySelector(".title"),E=document.querySelector("#prev"),C=document.querySelector("#next");function f(o,t){return new Date(o,t+1,0).getDate()}function j(o){return new Date(o).getDate().toString()}function m(o){return typeof o=="number"&&(o=`${o}`),o.padStart(2,"0")}function T(o){const t=new Date(o),e=t.getFullYear(),a=m(t.getMonth()+1),r=m(t.getDate());return`${e}-${a}-${r}`}class I{constructor(t){this.items=t}getTasks(t){return t?this.items.filter(({date:e})=>e===T(t)):[]}haveTask(t){return this.getTasks(t).length>0}haveEmergency(t){return this.getTasks(t).filter(({status:e})=>e===0).length>0}}var h,y,g,x,u,v,b,k;class N{constructor(t=new Date().getFullYear(),e=new Date().getMonth(),a=new Date().toISOString(),r=0){l(this,h);l(this,g);l(this,u);l(this,b);this.year=t,this.month=e,this.activeDate=a,this.mode=r}get firstDayInCurrentMonth(){return new Date(this.year,this.month,1).getDay()}prev(){let t=this.month-1;t<0&&(this.year--,t=11),this.month=t,this.render()}next(){let t=this.month+1;t>11&&(this.year++,t=0),this.month=t,this.render()}render(){d(this,b,k).call(this),d(this,u,v).call(this)}}h=new WeakSet,y=function(){const t=this.firstDayInCurrentMonth,e=this.month-1,a=f(this.year,e);let r=[];for(let i=t;i>0;i--){const n=new Date(this.year,e,a-i).toISOString();r=[...r,{date:n}]}return r},g=new WeakSet,x=function(){let t=[];const e=f(this.year,this.month);for(let a=0;a<e;a++){const r=new Date(this.year,this.month,a+1).toISOString();t=[...t,{date:r}]}return t},u=new WeakSet,v=function(){w.innerHTML="",[...d(this,h,y).call(this),...d(this,g,x).call(this)].forEach(t=>{const e=document.createElement("time"),{date:a}=t;if(e.className="cell date-cell",e.innerText=j(a),e.dataset.date=a,new Date(a).getMonth()!==this.month&&e.classList.add("prev-month"),p.haveTask(a)){e.classList.add("hover:border-blue-300"),e.classList.add("cursor-pointer");const r=document.createElement("div");r.classList.add("tag"),r.classList.add(p.haveEmergency(a)?"emergency":"normal"),e.appendChild(r)}w.appendChild(e)})},b=new WeakSet,k=function(){const t=m(this.month+1);S.innerText=`${this.year}.${t}`};w.addEventListener("click",o=>{const t=o.target;if(Array.from(w.children).forEach(i=>{i.classList.remove("active")}),!t.classList.contains("date-cell")||!p.haveTask(t.dataset.date))return;c.activeDate=t.dataset.date||"",s.classList.remove("emergency"),s.classList.remove("normal"),s.classList.add("active"),s.classList.add(p.haveEmergency(c.activeDate)?"emergency":"normal"),t.classList.add("active");const r=`<ul>${p.getTasks(c.activeDate).map(i=>i.todo.map(n=>`<li> ${n}</li>`).join(""))}</ul>`;D.innerHTML=r});w.addEventListener("mouseover",o=>{const t=o.target;if(!t.classList.contains("date-cell"))return;const{offsetLeft:e,offsetTop:a}=t;s.style.left=`${e}px`,s.style.top=`${a}px`});M.addEventListener("click",()=>{s.classList.remove("active")});E.addEventListener("click",()=>{c.prev()});C.addEventListener("click",()=>{c.next()});window.addEventListener("resize",()=>{c.render()});const p=new I([{date:"2022-06-12",todo:["Have Meeting","Develop a project"],status:1},{date:"2022-06-13",todo:["Write Document","Finish the project"],status:0}]),c=new N;c.render();
